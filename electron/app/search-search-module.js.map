{"version":3,"sources":["webpack:///./src/app/pages/search/search.module.ts","webpack:///./src/app/pages/search/search.page.html","webpack:///./src/app/pages/search/search.page.scss","webpack:///./src/app/pages/search/search.page.ts","webpack:///./src/app/pipes/ms-to-mins/ms-to-mins.module.ts","webpack:///./src/app/pipes/ms-to-mins/ms-to-mins.pipe.ts","webpack:///./src/app/providers/itunes/itunes.service.ts"],"names":[],"mappings":"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","file":"search-search-module.js","sourcesContent":["import { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { TimePipeModule } from '../../pipes/ms-to-mins/ms-to-mins.module';\nimport { ItunesService } from '../../providers/itunes/itunes.service';\nimport { SearchPage } from './search.page';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    RouterModule.forChild([{ path: '', component: SearchPage }]),\n    TimePipeModule,\n    ReactiveFormsModule\n  ],\n  declarations: [SearchPage],\n  providers: [ItunesService],\n})\nexport class SearchModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"success\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>Search</ion-title>\\n  </ion-toolbar>\\n  <ion-toolbar color=\\\"success\\\">\\n    <ion-searchbar placeholder=\\\"\\\" [formControl]=\\\"searchInput\\\"  (ionCancel)=\\\"searchCleared($event)\\\" showCancelButton=\\\"true\\\">\\n    </ion-searchbar>\\n  </ion-toolbar>\\n\\n</ion-header>\\n<!--  -->\\n<ion-content>\\n    <ion-grid fixed no-padding>\\n      <!-- No Search term? -->\\n      <div *ngIf=\\\"!searchInput.value\\\" padding>\\n        <h1>Trending Bands</h1>\\n        <ion-item *ngFor=\\\" let trending of ['Pink Floyd', 'August Burns Red', 'Alkaline Trio']\\\" (click)=\\\"setSearch(trending)\\\">\\n          {{trending}}\\n        </ion-item>\\n      </div>\\n      <!-- Welp there's an error -->\\n      <div *ngIf=\\\"isError\\\" text-center padding>\\n        <ion-icon color=\\\"success\\\" name=\\\"warning\\\" size=\\\"large\\\"></ion-icon>\\n        <h1>Uh-oh...</h1>\\n        <h2>It's not me, it's you!</h2>\\n        <h2>It appears there is a connection problem</h2>\\n      </div>\\n      <!-- Alright, we're searching -->\\n      <div padding text-center class=\\\"stauts-spinner\\\" *ngIf=\\\"showSpinner\\\">\\n        <ion-spinner></ion-spinner>\\n      </div>\\n      <!-- We got some songs! -->\\n      <ion-item *ngFor=\\\"let track of listing\\\" detail-none [href]=\\\"'/app/detail/' + track.trackId\\\">\\n        <ion-thumbnail slot=\\\"start\\\">\\n          <img [src]=\\\"track.artworkUrl100\\\" alt=\\\"\\\">\\n        </ion-thumbnail>\\n        <ion-label>\\n          <h2>{{track.trackName}}</h2>\\n          <h3>{{track.artistName}}</h3>\\n          <p>{{track.collectionName}}</p>\\n        </ion-label>\\n        <ion-note slot=\\\"end\\\">\\n          {{track.trackTimeMillis | msToMins}}\\n        </ion-note>\\n      </ion-item>\\n    </ion-grid>\\n</ion-content>\\n\"","module.exports = \"\"","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { TrackDetailPage } from '../track-detail/track-detail.page';\nimport { ItunesService } from '../../providers/itunes/itunes.service';\n// import { SplashScreen } from '@ionic-native/splash-screen';\nimport { FormControl } from '@angular/forms';\nimport { debounceTime, tap, switchMap, filter } from 'rxjs/operators';\n\n@Component({\n  selector: 'search-page',\n  templateUrl: './search.page.html',\n  styleUrls: ['./search.page.scss']\n})\nexport class SearchPage implements OnInit {\n  @ViewChild('list') list: ElementRef;\n  hasSearch: boolean = false;\n  public listing = [];\n  public items = Array.from(Array(50).keys());\n  public isError: boolean = false;\n  public showSpinner: boolean = false;\n  public searchInput = new FormControl('');\n  public showOverlay: boolean = false;\n  constructor(\n    public itunes: ItunesService,\n    private router: Router\n  ) {}\n\n  searchFocused(e) {\n    this.hasSearch = true;\n    if (!this.searchInput.value) {\n      this.isError = false;\n    }\n  }\n  searchCleared(e) {\n    this.hasSearch = false;\n    this.isError = false;\n    this.listing = []\n  }\n  searchBlured(e) {\n    this.isError = false;\n  }\n  setSearch(val) {\n    this.isError = false;\n    this.hasSearch = true;\n    this.searchInput.setValue(val);\n  }\n  ngOnInit() {\n    console.log('search loaded')\n    this.searchInput.valueChanges\n      .pipe(\n        filter(term => {\n          if (term) {\n            this.showSpinner = true;\n            this.isError = false;\n            return term;\n          } else {\n\n            this.isError = false;\n            this.listing = [];\n            this.showSpinner = false;\n          }\n        }),\n        debounceTime(500),\n        switchMap(term => this.itunes.load(term)),\n        tap(() => {\n          this.showOverlay = false;\n          this.showSpinner = false;\n        })\n      )\n      .subscribe(\n        results => this.listing = results,\n        err => {\n          this.showOverlay = false;\n          this.showSpinner = false;\n          this.isError = true;\n        }\n      );\n  }\n  detail(track) {\n    this.router.navigate([`/app/detail`, track.trackId])\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MsToMinsPipe } from './ms-to-mins.pipe';\n\n@NgModule({\n  declarations: [MsToMinsPipe],\n  exports: [MsToMinsPipe]\n})\nexport class TimePipeModule {}\n","import { Pipe } from '@angular/core';\n@Pipe({\n  name: 'msToMins'\n})\nexport class MsToMinsPipe {\n  transform(value?: number) {\n    return this.durationFromMsHelper(value);\n  }\n  pad2(num) {\n    if (num <= 99) {\n      num = ('0' + num).slice(-2);\n    }\n    return num;\n  }\n  durationFromMsHelper(ms) {\n    let x: number = ms / 1000;\n    let seconds: number = this.pad2(Math.floor(x % 60));\n    x /= 60;\n    let minutes: number = this.pad2(Math.floor(x % 60));\n    x /= 60;\n    let hours: number = Math.floor(x % 24);\n    let newHours = hours ? this.pad2(hours) + ':' : '';\n    return newHours + minutes + ':' + seconds;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { timeout, retryWhen, delay, map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class ItunesService {\n  constructor(public http: HttpClient) {}\n  public load(query): Observable<any> {\n    return this.http\n      .get(\n        `https://itunes.apple.com/search?term=${encodeURIComponent(\n          query\n        )}&media=music`\n      )\n      .pipe(\n        retryWhen(error => error.pipe(delay(500))),\n        timeout(5000),\n        map((res: any) => res.results)\n      );\n  }\n\n  public loadSong(songId): Observable<any> {\n    return this.http\n      .get(`https://itunes.apple.com/lookup?id=${songId}`)\n      .pipe(\n        retryWhen(error => error.pipe(delay(500))),\n        timeout(5000),\n        map((res: any) => res.results[0])\n      );\n  }\n}\n"],"sourceRoot":""}