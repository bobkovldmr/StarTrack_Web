(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"2UVQ":function(n,e,t){"use strict";t.r(e);var o=t("LoAr"),r=function(){},i=t("0Ep+"),l=t("eBjM"),a=t("AnD+"),u=t("WT9V"),s=function(){function n(){}return n.prototype.getPalette=function(n,e,t){(void 0===e||e<2||e>256)&&(e=10),(void 0===t||t<1)&&(t=10);for(var o,r,i,l,a=new _(n),u=a.getImageData().data,s=a.getPixelCount(),d=[],p=0;p<s;p+=t)r=u[0+(o=4*p)],i=u[o+1],l=u[o+2],u[o+3]>=125&&(r>250&&i>250&&l>250||d.push([r,i,l]));var f=c.quantize(d,e),h=f?f.palette():null;return a.removeCanvas(),h},n.prototype.getColor=function(n,e){return void 0===e&&(e=10),this.getPalette(n,5,e)[0]},n.prototype.getColorFromUrl=function(n,e){var t=this;return void 0===e&&(e=10),new Promise(function(o,r){var i,l=new Image;l.crossOrigin="Anonymous",l.addEventListener("load",function(){i=t.getPalette(l,5,e),o({dominantColor:i[0],imageUrl:n})}),l.src=n,l.addEventListener("error",r.bind(t))})},n}(),d={map:function(n,e){var t={};return e?n.map(function(n,o){return t.index=o,e.call(t,n)}):n.slice()},naturalOrder:function(n,e){return n<e?-1:n>e?1:0},sum:function(n,e){var t={};return n.reduce(e?function(n,o,r){return t.index=r,n+e.call(t,o)}:function(n,e){return n+e},0)},max:function(n,e){return Math.max.apply(null,e?d.map(n,e):n)}},c=function(){var n=5,e=8-n,t=1e3;function o(e,t,o){return(e<<2*n)+(t<<n)+o}var r=function(){function n(n){this.comparator=n,this.contents=[],this.sorted=!1}return n.prototype.sort=function(){this.contents.sort(this.comparator),this.sorted=!0},n.prototype.push=function(n){this.contents.push(n),this.sorted=!1},n.prototype.peek=function(n){return this.sorted||this.sort(),void 0===n&&(n=this.contents.length-1),this.contents[n]},n.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},n.prototype.size=function(){return this.contents.length},n.prototype.map=function(n){return this.contents.map(n)},n.prototype.debug=function(){return this.sorted||this.sort(),this.contents},n}(),i=function(){function t(n,e,t,o,r,i,l){this.r1=n,this.r2=e,this.g1=t,this.g2=o,this.b1=r,this.b2=i,this.histo=l}return t.prototype.volume=function(n){return this._volume&&!n||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(n){if(!this._count_set||n){var e=0,t=void 0,r=void 0,i=void 0;for(t=this.r1;t<=this.r2;t++)for(r=this.g1;r<=this.g2;r++)for(i=this.b1;i<=this.b2;i++){var l=o(t,r,i);e+=this.histo[l]||0}this._count=e,this._count_set=!0}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.avg=function(e){if(!this._avg||e){var t=0,r=1<<8-n,i=0,l=0,a=0,u=void 0,s=void 0,d=void 0,c=void 0,_=void 0;for(s=this.r1;s<=this.r2;s++)for(d=this.g1;d<=this.g2;d++)for(c=this.b1;c<=this.b2;c++)_=o(s,d,c),t+=u=this.histo[_]||0,i+=u*(s+.5)*r,l+=u*(d+.5)*r,a+=u*(c+.5)*r;t?this._avg=[~~(i/t),~~(l/t),~~(a/t)]:(console.log("empty box"),this._avg=[~~(r*(this.r1+this.r2+1)/2),~~(r*(this.g1+this.g2+1)/2),~~(r*(this.b1+this.b2+1)/2)])}return this._avg},t.prototype.contains=function(n){var t=n[0]>>e;return t>=this.r1&&t<=this.r2&&n[1]>>e>=this.g1&&t<=this.g2&&n[2]>>e>=this.b1&&t<=this.b2},t}(),l=function(){function n(){this.vboxes=new r(function(n,e){return d.naturalOrder(n.vbox.count()*n.vbox.volume(),e.vbox.count()*e.vbox.volume())})}return n.prototype.push=function(n){this.vboxes.push({vbox:n,color:n.avg()})},n.prototype.palette=function(){return this.vboxes.map(function(n){return n.color})},n.prototype.size=function(){return this.vboxes.size()},n.prototype.map=function(n){for(var e=this.vboxes,t=0;t<e.size();t++)if(e.peek(t).vbox.contains(n))return e.peek(t).color;return this.nearest(n)},n.prototype.nearest=function(n){for(var e,t,o,r=this.vboxes,i=0;i<r.size();i++)((t=Math.sqrt(Math.pow(n[0]-r.peek(i).color[0],2)+Math.pow(n[1]-r.peek(i).color[1],2)+Math.pow(n[1]-r.peek(i).color[1],2)))<e||void 0===e)&&(e=t,o=r.peek(i).color);return o},n.prototype.forcebw=function(){var n=this.vboxes;n.sort(function(n,e){return d.naturalOrder(d.sum(n.color),d.sum(e.color))});var e=n[0].color;e[0]<5&&e[1]<5&&e[2]<5&&(n[0].color=[0,0,0]);var t=n.length-1,o=n[t].color;o[0]>251&&o[1]>251&&o[2]>251&&(n[t].color=[255,255,255])},n}();function a(n,e){if(e.count()){var t=e.r2-e.r1+1,r=e.g2-e.g1+1,i=d.max([t,r,e.b2-e.b1+1]);if(1==e.count())return[e.copy()];var l,a,u,s,c=0,_=[],p=[];if(i==t)for(l=e.r1;l<=e.r2;l++){for(s=0,a=e.g1;a<=e.g2;a++)for(u=e.b1;u<=e.b2;u++)s+=n[o(l,a,u)]||0;_[l]=c+=s}else if(i==r)for(l=e.g1;l<=e.g2;l++){for(s=0,a=e.r1;a<=e.r2;a++)for(u=e.b1;u<=e.b2;u++)s+=n[o(a,l,u)]||0;_[l]=c+=s}else for(l=e.b1;l<=e.b2;l++){for(s=0,a=e.r1;a<=e.r2;a++)for(u=e.g1;u<=e.g2;u++)s+=n[o(a,u,l)]||0;_[l]=c+=s}return _.forEach(function(n,e){p[e]=c-n}),function(n){var t,o,r,i,a,u=n+"1",s=n+"2",d=0;for(l=e[u];l<=e[s];l++)if(_[l]>c/2){for(r=e.copy(),i=e.copy(),a=(t=l-e[u])<=(o=e[s]-l)?Math.min(e[s]-1,~~(l+o/2)):Math.max(e[u],~~(l-1-t/2));!_[a];)a++;for(d=p[a];!d&&_[a-1];)d=p[--a];return r[s]=a,i[u]=r[s]+1,[r,i]}}(i==t?"r":i==r?"g":"b")}}return{quantize:function(u,s){if(!u.length||s<2||s>256)return console.log("wrong number of maxcolors"),!1;var c=function(t){var r,i=new Array(1<<3*n);return t.forEach(function(n){r=o(n[0]>>e,n[1]>>e,n[2]>>e),i[r]=(i[r]||0)+1}),i}(u);c.forEach(function(){});var _=function(n,t){var o,r,l,a=1e6,u=0,s=1e6,d=0,c=1e6,_=0;return n.forEach(function(n){r=n[1]>>e,l=n[2]>>e,(o=n[0]>>e)<a?a=o:o>u&&(u=o),r<s?s=r:r>d&&(d=r),l<c?c=l:l>_&&(_=l)}),new i(a,u,s,d,c,_,t)}(u,c),p=new r(function(n,e){return d.naturalOrder(n.count(),e.count())});function f(n,e){for(var o,r=1,i=0;i<t;)if((o=n.pop()).count()){var l=a(c,o),u=l[0],s=l[1];if(!u)return void console.log("vbox1 not defined; shouldn't happen!");if(n.push(u),s&&(n.push(s),r++),r>=e)return;if(i++>t)return void console.log("infinite loop; perhaps too few pixels!")}else n.push(o),i++}p.push(_),f(p,.75*s);for(var h=new r(function(n,e){return d.naturalOrder(n.count()*n.volume(),e.count()*e.volume())});p.size();)h.push(p.pop());f(h,s-h.size());for(var m=new l;h.size();)m.push(h.pop());return m}}}(),_=function(){function n(n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=n.width,this.height=this.canvas.height=n.height,this.context.drawImage(n,0,0,this.width,this.height)}return n.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},n.prototype.update=function(n){this.context.putImageData(n,0,0)},n.prototype.getPixelCount=function(){return this.width*this.height},n.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},n.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)},n}(),p=function(){function n(n,e){this.colorThief=n,this.el=e}return n.prototype.ngAfterViewInit=function(){var n=this;this.colorThief.getColorFromUrl(this.colorFromImage.src).then(function(e){var t=e.dominantColor;n.el.nativeElement.style.opacity=1,n.el.nativeElement.style.backgroundColor="rgb("+t[0]+","+t[1]+","+t[2]+")"})},n}(),f=t("9TYo"),h=t("IfiR"),m=t("ELsb"),v=t("981U"),g=t("O4qs"),b=function(){function n(){this.progressValue=0,this.ifPlaying=!1,this.isFavorite=!1,this.favoriteIcon="star-outline",this.isSeeking=!1}return Object.defineProperty(n.prototype,"fullImage",{get:function(){return this.track.artworkUrl100.replace(/100x100bb/,"400x400bb")},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){var n=this;this.player=new g.Howl({src:[this.track.previewUrl],onplay:function(){n.animationQ=requestAnimationFrame(n.setProgress.bind(n))},onend:function(){n.playerEnded()}})},n.prototype.toggleSong=function(){this.ifPlaying?this.stopSong():this.playSong()},n.prototype.playSong=function(){this.player.play(),this.ifPlaying=!0},n.prototype.stopSong=function(){this.ifPlaying=!1,this.player.stop(),window.cancelAnimationFrame(this.animationQ)},n.prototype.setProgress=function(){if(!this.isSeeking){var n=this.player.seek();this.progressValue=n/this.player.duration()*100||0,this.animationQ=requestAnimationFrame(this.setProgress.bind(this))}},n.prototype.seek=function(n){this.isSeeking=!1;var e=this.player.duration();this.player.seek(e*(n/100)),this.animationQ=requestAnimationFrame(this.setProgress.bind(this))},n.prototype.handleDrag=function(){this.isSeeking=!0},n.prototype.playerEnded=function(){this.ifPlaying=!1},n}(),y=o.Ia({encapsulation:2,styles:[["music-card .track-img{transition:all .5s cubic-bezier(.42,0,0,1.93);-webkit-transform:scale3d(.8,.8,.8);transform:scale3d(.8,.8,.8);max-width:400px;margin:auto;border-radius:15px}music-card .track-img.playing{-webkit-transform:scale3d(.89,.89,.89);transform:scale3d(.89,.89,.89)}music-card .track-img.is-seeking{transition:all .1s linear;-webkit-transform:scale3d(.8,.8,.8) translateY(-35px);transform:scale3d(.8,.8,.8) translateY(-35px)}music-card .track-img img{border-radius:15px}music-card .track-img .background-shadow{height:100%;top:0;bottom:0;left:0;position:absolute;width:100%;transition:all .3s cubic-bezier(.42,0,.36,1.46);z-index:-1;opacity:0;background-color:#000;-webkit-filter:blur(20px);filter:blur(20px);border-radius:15px;-webkit-transform:scale3d(.84,.84,.84);transform:scale3d(.84,.84,.84)}music-card .track-img.playing .background-shadow{-webkit-transform:scale3d(.9,.9,.9) translate3d(0,35px,0);transform:scale3d(.9,.9,.9) translate3d(0,35px,0)}music-card .item-ios,music-card .item-md{background-color:transparent}.ios music-card .range-ios .range-knob{transition:-webkit-transform .1s linear;transition:transform .1s linear;transition:transform .1s linear,-webkit-transform .1s linear;-webkit-transform:scale3d(.5,.5,.5);transform:scale3d(.5,.5,.5)}.ios music-card .range-knob-handle.range-knob-pressed .range-knob{-webkit-transform:scale3d(.8,.8,.8);transform:scale3d(.8,.8,.8)}"]],data:{}});function A(n){return o.gb(0,[(n()(),o.Ka(0,0,null,null,1,"ion-icon",[["color","success"],["name","play"]],null,null,null,null,null)),o.Ja(1,16384,null,0,i.a,[o.l],{color:[0,"color"],name:[1,"name"]},null)],function(n,e){n(e,1,0,"success","play")},null)}function w(n){return o.gb(0,[(n()(),o.Ka(0,0,null,null,1,"ion-icon",[["color","success"],["name","square"]],null,null,null,null,null)),o.Ja(1,16384,null,0,i.a,[o.l],{color:[0,"color"],name:[1,"name"]},null)],function(n,e){n(e,1,0,"success","square")},null)}function x(n){return o.gb(0,[o.Wa(0,l.a,[]),(n()(),o.Ka(1,0,null,null,55,"ion-card",[],null,null,null,null,null)),o.Ja(2,16384,null,0,a.g,[o.l],null,null),(n()(),o.Ka(3,0,null,null,53,"ion-grid",[["no-padding",""]],null,null,null,null,null)),o.Ja(4,16384,null,0,a.v,[],null,null),(n()(),o.Ka(5,0,null,null,51,"ion-row",[["align-items-center",""]],null,null,null,null,null)),o.Ja(6,16384,null,0,a.Aa,[],null,null),(n()(),o.Ka(7,0,null,null,7,"ion-col",[["col-12",""],["col-md-5",""]],null,null,null,null,null)),o.Ja(8,16384,null,0,a.o,[],null,null),(n()(),o.Ka(9,0,null,null,5,"div",[["class","track-img"]],null,null,null,null,null)),o.Ja(10,278528,null,0,u.h,[o.s,o.t,o.l,o.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o.Xa(11,{"":0,playing:1,"is-seeking":2}),(n()(),o.Ka(12,0,[["img",1]],null,0,"img",[["alt",""]],[[8,"src",4]],null,null,null,null)),(n()(),o.Ka(13,0,null,null,1,"div",[["class","background-shadow"]],null,null,null,null,null)),o.Ja(14,4210688,null,0,p,[s,o.l],{colorFromImage:[0,"colorFromImage"]},null),(n()(),o.Ka(15,0,null,null,41,"ion-col",[],null,null,null,null,null)),o.Ja(16,16384,null,0,a.o,[],null,null),(n()(),o.Ka(17,0,null,null,30,"ion-card-content",[],null,null,null,null,null)),o.Ja(18,16384,null,0,a.h,[o.l],null,null),(n()(),o.Ka(19,0,null,null,3,"ion-card-title",[],null,null,null,null,null)),o.Ja(20,16384,null,0,a.k,[o.l],null,null),(n()(),o.Ka(21,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),o.eb(22,null,["",""])),(n()(),o.Ka(23,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),o.eb(24,null,["by ",""])),(n()(),o.Ka(25,0,null,null,1,"em",[],null,null,null,null,null)),(n()(),o.eb(26,null,["",""])),(n()(),o.Ka(27,0,null,null,20,"ion-grid",[],null,null,null,null,null)),o.Ja(28,16384,null,0,a.v,[],null,null),(n()(),o.Ka(29,0,null,null,18,"ion-row",[],null,null,null,null,null)),o.Ja(30,16384,null,0,a.Aa,[],null,null),(n()(),o.Ka(31,0,null,null,7,"ion-col",[["col-3",""]],null,null,null,null,null)),o.Ja(32,16384,null,0,a.o,[],null,null),(n()(),o.Ka(33,0,null,null,5,"ion-fab-button",[["color","light"],["mini",""]],null,[[null,"click"]],function(n,e,t){var o=!0;return"click"===e&&(o=!1!==n.component.toggleSong()&&o),o},null,null)),o.Ja(34,16384,null,0,a.s,[o.l],{color:[0,"color"]},null),(n()(),o.Fa(16777216,null,null,1,null,A)),o.Ja(36,16384,null,0,u.j,[o.P,o.M],{ngIf:[0,"ngIf"]},null),(n()(),o.Fa(16777216,null,null,1,null,w)),o.Ja(38,16384,null,0,u.j,[o.P,o.M],{ngIf:[0,"ngIf"]},null),(n()(),o.Ka(39,0,null,null,8,"ion-col",[["col-9",""]],null,null,null,null,null)),o.Ja(40,16384,null,0,a.o,[],null,null),(n()(),o.Ka(41,0,null,null,6,"ion-range",[["color","success"],["max","100"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionFocus"],[null,"ionBlur"],[null,"ionChange"]],function(n,e,t){var r=!0,i=n.component;return"ionChange"===e&&(r=!1!==o.Ta(n,43)._handleChangeEvent(t.target.value)&&r),"ionBlur"===e&&(r=!1!==o.Ta(n,43)._handleBlurEvent()&&r),"ngModelChange"===e&&(r=!1!==(i.progressValue=t)&&r),"ionFocus"===e&&(r=!1!==i.handleDrag()&&r),"ionBlur"===e&&(r=!1!==i.seek(t.value)&&r),r},null,null)),o.Ja(42,16384,null,0,a.U,[o.l],{color:[0,"color"],max:[1,"max"]},{ionChange:"ionChange",ionFocus:"ionFocus",ionBlur:"ionBlur"}),o.Ja(43,16384,null,0,f.a,[o.l],null,null),o.Za(1024,null,h.e,function(n){return[n]},[f.a]),o.Ja(45,671744,null,0,h.h,[[8,null],[8,null],[8,null],[6,h.e]],{model:[0,"model"]},{update:"ngModelChange"}),o.Za(2048,null,h.f,null,[h.h]),o.Ja(47,16384,null,0,h.g,[[4,h.f]],null,null),(n()(),o.Ka(48,0,null,null,8,"ion-item",[],null,[[null,"click"]],function(n,e,t){var r=!0;return"click"===e&&(r=!1!==o.Ta(n,50).onClick(t)&&r),r},null,null)),o.Ja(49,16384,null,0,a.B,[o.l],null,null),o.Ja(50,16384,null,0,m.a,[[2,v.l],o.l],null,null),(n()(),o.Ka(51,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),o.eb(-1,null,["Track Duration"])),(n()(),o.Ka(53,0,null,null,3,"ion-badge",[["color","light"],["slot","end"]],null,null,null,null,null)),o.Ja(54,16384,null,0,a.d,[o.l],{color:[0,"color"]},null),(n()(),o.eb(55,null,[" "," "])),o.Ya(56,1)],function(n,e){var t=e.component;n(e,10,0,"track-img",n(e,11,0,!t.ifPlaying,t.ifPlaying,t.isSeeking)),n(e,14,0,o.Ta(e,12)),n(e,34,0,"light"),n(e,36,0,!t.ifPlaying),n(e,38,0,t.ifPlaying),n(e,42,0,"success","100"),n(e,45,0,t.progressValue),n(e,54,0,"light")},function(n,e){var t=e.component;n(e,12,0,t.fullImage),n(e,22,0,t.track.trackName),n(e,24,0,t.track.artistName),n(e,26,0,t.track.collectionName),n(e,41,0,o.Ta(e,47).ngClassUntouched,o.Ta(e,47).ngClassTouched,o.Ta(e,47).ngClassPristine,o.Ta(e,47).ngClassDirty,o.Ta(e,47).ngClassValid,o.Ta(e,47).ngClassInvalid,o.Ta(e,47).ngClassPending),n(e,55,0,o.fb(e,55,0,n(e,56,0,o.Ta(e,0),t.track.trackTimeMillis)))})}var k=t("1FaB"),T=t("VStH"),S=t("74Sz"),I=t("2jsQ"),F=t("g4/Q"),M=t("byp3"),P=t("tTBB"),O=t("eR42"),B=o.Ia({encapsulation:0,styles:[[""]],data:{}});function C(n){return o.gb(0,[(n()(),o.Ka(0,0,null,null,1,"music-card",[],null,null,null,x,y)),o.Ja(1,114688,[[1,4],["musicCard",4]],0,b,[],{track:[0,"track"]},null)],function(n,e){n(e,1,0,e.component.track)},null)}function E(n){return o.gb(0,[o.bb(671088640,1,{musicCard:0}),(n()(),o.Ka(1,0,null,null,18,"ion-header",[],null,null,null,null,null)),o.Ja(2,16384,null,0,a.w,[o.l],null,null),(n()(),o.Ka(3,0,null,null,16,"ion-toolbar",[["color","success"]],null,null,null,null,null)),o.Ja(4,16384,null,0,a.Ua,[o.l],{color:[0,"color"]},null),(n()(),o.Ka(5,0,null,null,4,"ion-buttons",[["slot","start"]],null,null,null,null,null)),o.Ja(6,16384,null,0,a.f,[],null,null),(n()(),o.Ka(7,0,null,null,2,"ion-back-button",[["defaultHref","app/search"]],null,[[null,"click"]],function(n,e,t){var r=!0;return"click"===e&&(r=!1!==o.Ta(n,9).onClick(t)&&r),r},null,null)),o.Ja(8,16384,null,0,a.c,[o.l],{defaultHref:[0,"defaultHref"]},null),o.Ja(9,16384,null,0,k.a,[[2,v.l],[2,T.a],S.a,o.l],{defaultHref:[0,"defaultHref"]},null),(n()(),o.Ka(10,0,null,null,2,"ion-title",[],null,null,null,null,null)),o.Ja(11,16384,null,0,a.Va,[],null,null),(n()(),o.eb(12,null,["",""])),(n()(),o.Ka(13,0,null,null,6,"ion-buttons",[["slot","end"]],null,null,null,null,null)),o.Ja(14,16384,null,0,a.f,[],null,null),(n()(),o.Ka(15,0,null,null,4,"ion-button",[],null,[[null,"click"]],function(n,e,t){var r=!0,i=n.component;return"click"===e&&(r=!1!==o.Ta(n,17).onClick(t)&&r),"click"===e&&(r=!1!==i.toggleFavorites()&&r),r},null,null)),o.Ja(16,16384,null,0,a.e,[o.l],null,null),o.Ja(17,16384,null,0,m.a,[[2,v.l],o.l],null,null),(n()(),o.Ka(18,0,null,null,1,"ion-icon",[["slot","icon-only"]],null,null,null,null,null)),o.Ja(19,16384,null,0,i.a,[o.l],{name:[0,"name"]},null),(n()(),o.Ka(20,0,null,null,11,"ion-content",[],null,null,null,null,null)),o.Ja(21,16384,null,0,a.p,[o.l],null,null),(n()(),o.Ka(22,0,null,null,9,"ion-list",[],null,null,null,null,null)),o.Ja(23,16384,null,0,a.I,[],null,null),(n()(),o.Ka(24,0,null,null,7,"ion-grid",[],null,null,null,null,null)),o.Ja(25,16384,null,0,a.v,[],null,null),(n()(),o.Ka(26,0,null,null,5,"ion-row",[],null,null,null,null,null)),o.Ja(27,16384,null,0,a.Aa,[],null,null),(n()(),o.Ka(28,0,null,null,3,"ion-col",[["col-sm-10",""],["offset-sm-1",""]],null,null,null,null,null)),o.Ja(29,16384,null,0,a.o,[],null,null),(n()(),o.Fa(16777216,null,null,1,null,C)),o.Ja(31,16384,null,0,u.j,[o.P,o.M],{ngIf:[0,"ngIf"]},null)],function(n,e){var t=e.component;n(e,4,0,"success"),n(e,8,0,"app/search"),n(e,9,0,"app/search"),n(e,19,0,t.favoriteIcon),n(e,31,0,t.track)},function(n,e){var t=e.component;n(e,12,0,null==t.track?null:t.track.trackName)})}var D=o.Ga("track-detail-page",I.a,function(n){return o.gb(0,[(n()(),o.Ka(0,0,null,null,1,"track-detail-page",[],null,null,null,E,B)),o.Ja(1,114688,null,0,I.a,[F.a,M.a,P.a,O.a,v.a],null,null)],function(n,e){n(e,1,0)},null)},{},{},[]),J=t("/yxp"),G=t("eH3v"),K=t("8AnQ"),H=t("GiBk"),q=t("JKMm"),L=t("UdS4"),V=function(){},R=function(){};t.d(e,"TrackDetailModuleNgFactory",function(){return j});var j=o.Ha(r,[],function(n){return o.Ra([o.Sa(512,o.j,o.Aa,[[8,[D]],[3,o.j],o.x]),o.Sa(4608,u.l,u.k,[o.u,[2,u.p]]),o.Sa(4608,J.a,J.a,[o.g]),o.Sa(4608,G.a,G.a,[o.j,o.q,J.a]),o.Sa(4608,K.a,K.a,[o.j,o.q,J.a]),o.Sa(4608,h.k,h.k,[]),o.Sa(4608,s,s,[]),o.Sa(4608,O.a,O.a,[H.c]),o.Sa(1073742336,u.b,u.b,[]),o.Sa(1073742336,q.a,q.a,[]),o.Sa(1073742336,L.a,L.a,[]),o.Sa(1073742336,V,V,[]),o.Sa(1073742336,h.j,h.j,[]),o.Sa(1073742336,h.d,h.d,[]),o.Sa(1073742336,R,R,[]),o.Sa(1073742336,v.m,v.m,[[2,v.q],[2,v.l]]),o.Sa(1073742336,r,r,[]),o.Sa(1024,v.j,function(){return[[{path:"",component:I.a}]]},[])])})},"2jsQ":function(n,e,t){"use strict";t.d(e,"a",function(){return o}),t("eR42"),t("Vb0S"),t("Buq+");var o=function(){function n(n,e,t,o,r){this.events=n,this.storage=e,this.toastCtrl=t,this.service=o,this.route=r,this.isFavorite=!1,this.favoriteIcon="star-outline"}return n.prototype.ngOnInit=function(){var n=this;this.service.loadSong(this.route.snapshot.params.id).subscribe(function(e){return n.track=e},function(n){return console.log(n)},function(){return n.checkStorage()})},n.prototype.checkStorage=function(){var n=this;this.storage.get(this.track.trackId).then(function(e){e?(n.isFavorite=!0,n.favoriteIcon="star"):(n.isFavorite=!1,n.favoriteIcon="star-outline")})},n.prototype.toggleFavorites=function(){this.isFavorite?(this.toastCtrl.create({message:"Song remove to Favorites",duration:3e3,position:"bottom"}).then(function(n){return n.present()}),this.storage.remove(this.track.trackId),this.isFavorite=!1,this.favoriteIcon="star-outline",this.events.publish("songRemoved",this.track)):(this.toastCtrl.create({message:"Song added to Favorites",duration:3e3,position:"bottom"}).then(function(n){return n.present()}),this.isFavorite=!0,this.favoriteIcon="star",this.storage.set(this.track.trackId,this.track),this.events.publish("songAdded",this.track))},n.prototype.ionViewWillLeave=function(){this.musicCard.stopSong()},n}()},O4qs:function(n,e,t){var o;!function(){"use strict";var t=function(){this.init()};t.prototype={init:function(){var n=this||r;return n._counter=1e3,n._codecs={},n._howls=[],n._muted=!1,n._volume=1,n._canPlayEvent="canplaythrough",n._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,n.masterGain=null,n.noAudio=!1,n.usingWebAudio=!0,n.autoSuspend=!0,n.ctx=null,n.mobileAutoEnable=!0,n._setup(),n},volume:function(n){var e=this||r;if(n=parseFloat(n),e.ctx||_(),void 0!==n&&n>=0&&n<=1){if(e._volume=n,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(n,r.ctx.currentTime);for(var t=0;t<e._howls.length;t++)if(!e._howls[t]._webAudio)for(var o=e._howls[t]._getSoundIds(),i=0;i<o.length;i++){var l=e._howls[t]._soundById(o[i]);l&&l._node&&(l._node.volume=l._volume*n)}return e}return e._volume},mute:function(n){var e=this||r;e.ctx||_(),e._muted=n,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(n?0:e._volume,r.ctx.currentTime);for(var t=0;t<e._howls.length;t++)if(!e._howls[t]._webAudio)for(var o=e._howls[t]._getSoundIds(),i=0;i<o.length;i++){var l=e._howls[t]._soundById(o[i]);l&&l._node&&(l._node.muted=!!n||l._muted)}return e},unload:function(){for(var n=this||r,e=n._howls.length-1;e>=0;e--)n._howls[e].unload();return n.usingWebAudio&&n.ctx&&void 0!==n.ctx.close&&(n.ctx.close(),n.ctx=null,_()),n},codecs:function(n){return(this||r)._codecs[n.replace(/^x-/,"")]},_setup:function(){var n=this||r;if(n.state=n.ctx&&n.ctx.state||"running",n._autoSuspend(),!n.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(n._canPlayEvent="canplay")}catch(e){n.noAudio=!0}else n.noAudio=!0;try{(new Audio).muted&&(n.noAudio=!0)}catch(n){}return n.noAudio||n._setupCodecs(),n},_setupCodecs:function(){var n=this||r,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return n}if(!e||"function"!=typeof e.canPlayType)return n;var t=e.canPlayType("audio/mpeg;").replace(/^no$/,""),o=n._navigator&&n._navigator.userAgent.match(/OPR\/([0-6].)/g),i=o&&parseInt(o[0].split("/")[1],10)<33;return n._codecs={mp3:!(i||!t&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!t,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},n},_enableMobileAudio:function(){var n=this||r,e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(n._navigator&&n._navigator.userAgent),t=!!("ontouchend"in window||n._navigator&&n._navigator.maxTouchPoints>0||n._navigator&&n._navigator.msMaxTouchPoints>0);if(!n._mobileEnabled&&n.ctx&&(e||t)){n._mobileEnabled=!1,n._mobileUnloaded||44100===n.ctx.sampleRate||(n._mobileUnloaded=!0,n.unload()),n._scratchBuffer=n.ctx.createBuffer(1,1,22050);var o=function(){r._autoResume();var e=n.ctx.createBufferSource();e.buffer=n._scratchBuffer,e.connect(n.ctx.destination),void 0===e.start?e.noteOn(0):e.start(0),"function"==typeof n.ctx.resume&&n.ctx.resume(),e.onended=function(){e.disconnect(0),n._mobileEnabled=!0,n.mobileAutoEnable=!1,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0)}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),n}},_autoSuspend:function(){var n=this;if(n.autoSuspend&&n.ctx&&void 0!==n.ctx.suspend&&r.usingWebAudio){for(var e=0;e<n._howls.length;e++)if(n._howls[e]._webAudio)for(var t=0;t<n._howls[e]._sounds.length;t++)if(!n._howls[e]._sounds[t]._paused)return n;return n._suspendTimer&&clearTimeout(n._suspendTimer),n._suspendTimer=setTimeout(function(){n.autoSuspend&&(n._suspendTimer=null,n.state="suspending",n.ctx.suspend().then(function(){n.state="suspended",n._resumeAfterSuspend&&(delete n._resumeAfterSuspend,n._autoResume())}))},3e4),n}},_autoResume:function(){var n=this;if(n.ctx&&void 0!==n.ctx.resume&&r.usingWebAudio)return"running"===n.state&&n._suspendTimer?(clearTimeout(n._suspendTimer),n._suspendTimer=null):"suspended"===n.state?(n.ctx.resume().then(function(){n.state="running";for(var e=0;e<n._howls.length;e++)n._howls[e]._emit("resume")}),n._suspendTimer&&(clearTimeout(n._suspendTimer),n._suspendTimer=null)):"suspending"===n.state&&(n._resumeAfterSuspend=!0),n}};var r=new t,i=function(n){n.src&&0!==n.src.length?this.init(n):console.error("An array of source files must be passed with any new Howl.")};i.prototype={init:function(n){var e=this;return r.ctx||_(),e._autoplay=n.autoplay||!1,e._format="string"!=typeof n.format?n.format:[n.format],e._html5=n.html5||!1,e._muted=n.mute||!1,e._loop=n.loop||!1,e._pool=n.pool||5,e._preload="boolean"!=typeof n.preload||n.preload,e._rate=n.rate||1,e._sprite=n.sprite||{},e._src="string"!=typeof n.src?n.src:[n.src],e._volume=void 0!==n.volume?n.volume:1,e._xhrWithCredentials=n.xhrWithCredentials||!1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=n.onend?[{fn:n.onend}]:[],e._onfade=n.onfade?[{fn:n.onfade}]:[],e._onload=n.onload?[{fn:n.onload}]:[],e._onloaderror=n.onloaderror?[{fn:n.onloaderror}]:[],e._onplayerror=n.onplayerror?[{fn:n.onplayerror}]:[],e._onpause=n.onpause?[{fn:n.onpause}]:[],e._onplay=n.onplay?[{fn:n.onplay}]:[],e._onstop=n.onstop?[{fn:n.onstop}]:[],e._onmute=n.onmute?[{fn:n.onmute}]:[],e._onvolume=n.onvolume?[{fn:n.onvolume}]:[],e._onrate=n.onrate?[{fn:n.onrate}]:[],e._onseek=n.onseek?[{fn:n.onseek}]:[],e._onresume=[],e._webAudio=r.usingWebAudio&&!e._html5,void 0!==r.ctx&&r.ctx&&r.mobileAutoEnable&&r._enableMobileAudio(),r._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e.load(),e},load:function(){var n=null;if(r.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var e=0;e<this._src.length;e++){var t,o;if(this._format&&this._format[e])t=this._format[e];else{if("string"!=typeof(o=this._src[e])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(t=/^data:audio\/([^;,]+);/i.exec(o))||(t=/\.([^.]+)$/.exec(o.split("?",1)[0])),t&&(t=t[1].toLowerCase())}if(t||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),t&&r.codecs(t)){n=this._src[e];break}}if(n)return this._src=n,this._state="loading","https:"===window.location.protocol&&"http:"===n.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new l(this),this._webAudio&&u(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(n,e){var t=this,o=null;if("number"==typeof n)o=n,n=null;else{if("string"==typeof n&&"loaded"===t._state&&!t._sprite[n])return null;if(void 0===n){n="__default";for(var i=0,l=0;l<t._sounds.length;l++)t._sounds[l]._paused&&!t._sounds[l]._ended&&(i++,o=t._sounds[l]._id);1===i?n=null:o=null}}var a=o?t._soundById(o):t._inactiveSound();if(!a)return null;if(o&&!n&&(n=a._sprite||"__default"),"loaded"!==t._state){a._sprite=n,a._ended=!1;var u=a._id;return t._queue.push({event:"play",action:function(){t.play(u)}}),u}if(o&&!a._paused)return e||t._loadQueue("play"),a._id;t._webAudio&&r._autoResume();var s=Math.max(0,a._seek>0?a._seek:t._sprite[n][0]/1e3),d=Math.max(0,(t._sprite[n][0]+t._sprite[n][1])/1e3-s),c=1e3*d/Math.abs(a._rate);a._paused=!1,a._ended=!1,a._sprite=n,a._seek=s,a._start=t._sprite[n][0]/1e3,a._stop=(t._sprite[n][0]+t._sprite[n][1])/1e3,a._loop=!(!a._loop&&!t._sprite[n][2]);var _=a._node;if(t._webAudio){var p=function(){t._refreshBuffer(a),_.gain.setValueAtTime(a._muted||t._muted?0:a._volume,r.ctx.currentTime),a._playStart=r.ctx.currentTime,void 0===_.bufferSource.start?_.bufferSource.noteGrainOn(0,s,a._loop?86400:d):_.bufferSource.start(0,s,a._loop?86400:d),c!==1/0&&(t._endTimers[a._id]=setTimeout(t._ended.bind(t,a),c)),e||setTimeout(function(){t._emit("play",a._id)},0)};"running"===r.state?p():(t.once("resume",p),t._clearTimer(a._id))}else{var f=function(){_.currentTime=s,_.muted=a._muted||t._muted||r._muted||_.muted,_.volume=a._volume*r.volume(),_.playbackRate=a._rate;try{var o=_.play();if("undefined"!=typeof Promise&&o instanceof Promise){t._playLock=!0;var i=function(){t._playLock=!1,e||t._emit("play",a._id)};o.then(i,i)}else e||t._emit("play",a._id);if(_.paused)return void t._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");"__default"!==n?t._endTimers[a._id]=setTimeout(t._ended.bind(t,a),c):(t._endTimers[a._id]=function(){t._ended(a),_.removeEventListener("ended",t._endTimers[a._id],!1)},_.addEventListener("ended",t._endTimers[a._id],!1))}catch(n){t._emit("playerror",a._id,n)}},h=window&&window.ejecta||!_.readyState&&r._navigator.isCocoonJS;if(_.readyState>=3||h)f();else{var m=function(){f(),_.removeEventListener(r._canPlayEvent,m,!1)};_.addEventListener(r._canPlayEvent,m,!1),t._clearTimer(a._id)}}return a._id},pause:function(n){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(n)}}),e;for(var t=e._getSoundIds(n),o=0;o<t.length;o++){e._clearTimer(t[o]);var r=e._soundById(t[o]);if(r&&!r._paused&&(r._seek=e.seek(t[o]),r._rateSeek=0,r._paused=!0,e._stopFade(t[o]),r._node))if(e._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(n,e){var t=this;if("loaded"!==t._state)return t._queue.push({event:"stop",action:function(){t.stop(n)}}),t;for(var o=t._getSoundIds(n),r=0;r<o.length;r++){t._clearTimer(o[r]);var i=t._soundById(o[r]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,t._stopFade(o[r]),i._node&&(t._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause())),e||t._emit("stop",i._id))}return t},mute:function(n,e){var t=this;if("loaded"!==t._state)return t._queue.push({event:"mute",action:function(){t.mute(n,e)}}),t;if(void 0===e){if("boolean"!=typeof n)return t._muted;t._muted=n}for(var o=t._getSoundIds(e),i=0;i<o.length;i++){var l=t._soundById(o[i]);l&&(l._muted=n,l._interval&&t._stopFade(l._id),t._webAudio&&l._node?l._node.gain.setValueAtTime(n?0:l._volume,r.ctx.currentTime):l._node&&(l._node.muted=!!r._muted||n),t._emit("mute",l._id))}return t},volume:function(){var n,e,t,o=this,i=arguments;if(0===i.length)return o._volume;if(1===i.length||2===i.length&&void 0===i[1]?o._getSoundIds().indexOf(i[0])>=0?e=parseInt(i[0],10):n=parseFloat(i[0]):i.length>=2&&(n=parseFloat(i[0]),e=parseInt(i[1],10)),!(void 0!==n&&n>=0&&n<=1))return(t=e?o._soundById(e):o._sounds[0])?t._volume:0;if("loaded"!==o._state)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,i)}}),o;void 0===e&&(o._volume=n),e=o._getSoundIds(e);for(var l=0;l<e.length;l++)(t=o._soundById(e[l]))&&(t._volume=n,i[2]||o._stopFade(e[l]),o._webAudio&&t._node&&!t._muted?t._node.gain.setValueAtTime(n,r.ctx.currentTime):t._node&&!t._muted&&(t._node.volume=n*r.volume()),o._emit("volume",t._id));return o},fade:function(n,e,t,o){var i=this;if("loaded"!==i._state)return i._queue.push({event:"fade",action:function(){i.fade(n,e,t,o)}}),i;i.volume(n,o);for(var l=i._getSoundIds(o),a=0;a<l.length;a++){var u=i._soundById(l[a]);if(u){if(o||i._stopFade(l[a]),i._webAudio&&!u._muted){var s=r.ctx.currentTime,d=s+t/1e3;u._volume=n,u._node.gain.setValueAtTime(n,s),u._node.gain.linearRampToValueAtTime(e,d)}i._startFadeInterval(u,n,e,t,l[a],void 0===o)}}return i},_startFadeInterval:function(n,e,t,o,r,i){var l=this,a=e,u=t-e,s=Math.abs(u/.01),d=Math.max(4,s>0?o/s:o),c=Date.now();n._fadeTo=t,n._interval=setInterval(function(){var r=(Date.now()-c)/o;c=Date.now(),a+=u*r,a=Math.max(0,a),a=Math.min(1,a),a=Math.round(100*a)/100,l._webAudio?n._volume=a:l.volume(a,n._id,!0),i&&(l._volume=a),(t<e&&a<=t||t>e&&a>=t)&&(clearInterval(n._interval),n._interval=null,n._fadeTo=null,l.volume(t,n._id),l._emit("fade",n._id))},d)},_stopFade:function(n){var e=this._soundById(n);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(e._interval),e._interval=null,this.volume(e._fadeTo,n),e._fadeTo=null,this._emit("fade",n)),this},loop:function(){var n,e,t,o=arguments;if(0===o.length)return this._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(t=this._soundById(parseInt(o[0],10)))&&t._loop;this._loop=n=o[0]}else 2===o.length&&(n=o[0],e=parseInt(o[1],10));for(var r=this._getSoundIds(e),i=0;i<r.length;i++)(t=this._soundById(r[i]))&&(t._loop=n,this._webAudio&&t._node&&t._node.bufferSource&&(t._node.bufferSource.loop=n,n&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop)));return this},rate:function(){var n,e,t,o=this,i=arguments;if(0===i.length?e=o._sounds[0]._id:1===i.length?o._getSoundIds().indexOf(i[0])>=0?e=parseInt(i[0],10):n=parseFloat(i[0]):2===i.length&&(n=parseFloat(i[0]),e=parseInt(i[1],10)),"number"!=typeof n)return(t=o._soundById(e))?t._rate:o._rate;if("loaded"!==o._state)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,i)}}),o;void 0===e&&(o._rate=n),e=o._getSoundIds(e);for(var l=0;l<e.length;l++)if(t=o._soundById(e[l])){t._rateSeek=o.seek(e[l]),t._playStart=o._webAudio?r.ctx.currentTime:t._playStart,t._rate=n,o._webAudio&&t._node&&t._node.bufferSource?t._node.bufferSource.playbackRate.setValueAtTime(n,r.ctx.currentTime):t._node&&(t._node.playbackRate=n);var a=o.seek(e[l]),u=1e3*((o._sprite[t._sprite][0]+o._sprite[t._sprite][1])/1e3-a)/Math.abs(t._rate);!o._endTimers[e[l]]&&t._paused||(o._clearTimer(e[l]),o._endTimers[e[l]]=setTimeout(o._ended.bind(o,t),u)),o._emit("rate",t._id)}return o},seek:function(){var n,e,t=this,o=arguments;if(0===o.length?e=t._sounds[0]._id:1===o.length?t._getSoundIds().indexOf(o[0])>=0?e=parseInt(o[0],10):t._sounds.length&&(e=t._sounds[0]._id,n=parseFloat(o[0])):2===o.length&&(n=parseFloat(o[0]),e=parseInt(o[1],10)),void 0===e)return t;if("loaded"!==t._state)return t._queue.push({event:"seek",action:function(){t.seek.apply(t,o)}}),t;var i=t._soundById(e);if(i){if(!("number"==typeof n&&n>=0)){if(t._webAudio){var l=t.playing(e)?r.ctx.currentTime-i._playStart:0;return i._seek+((i._rateSeek?i._rateSeek-i._seek:0)+l*Math.abs(i._rate))}return i._node.currentTime}var a=t.playing(e);if(a&&t.pause(e,!0),i._seek=n,i._ended=!1,t._clearTimer(e),a&&t.play(e,!0),!t._webAudio&&i._node&&(i._node.currentTime=n),a&&!t._webAudio){var u=function(){t._playLock?setTimeout(u,0):t._emit("seek",e)};setTimeout(u,0)}else t._emit("seek",e)}return t},playing:function(n){if("number"==typeof n){var e=this._soundById(n);return!!e&&!e._paused}for(var t=0;t<this._sounds.length;t++)if(!this._sounds[t]._paused)return!0;return!1},duration:function(n){var e=this._duration,t=this._soundById(n);return t&&(e=this._sprite[t._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var n=this,e=n._sounds,t=0;t<e.length;t++){e[t]._paused||n.stop(e[t]._id),n._webAudio||(/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent)||(e[t]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),e[t]._node.removeEventListener("error",e[t]._errorFn,!1),e[t]._node.removeEventListener(r._canPlayEvent,e[t]._loadFn,!1)),delete e[t]._node,n._clearTimer(e[t]._id);var o=r._howls.indexOf(n);o>=0&&r._howls.splice(o,1)}var i=!0;for(t=0;t<r._howls.length;t++)if(r._howls[t]._src===n._src){i=!1;break}return a&&i&&delete a[n._src],r.noAudio=!1,n._state="unloaded",n._sounds=[],n=null,null},on:function(n,e,t,o){return"function"==typeof e&&this["_on"+n].push(o?{id:t,fn:e,once:o}:{id:t,fn:e}),this},off:function(n,e,t){var o=this["_on"+n],r=0;if("number"==typeof e&&(t=e,e=null),e||t)for(r=0;r<o.length;r++){var i=t===o[r].id;if(e===o[r].fn&&i||!e&&i){o.splice(r,1);break}}else if(n)this["_on"+n]=[];else{var l=Object.keys(this);for(r=0;r<l.length;r++)0===l[r].indexOf("_on")&&Array.isArray(this[l[r]])&&(this[l[r]]=[])}return this},once:function(n,e,t){return this.on(n,e,t,1),this},_emit:function(n,e,t){for(var o=this["_on"+n],r=o.length-1;r>=0;r--)o[r].id&&o[r].id!==e&&"load"!==n||(setTimeout((function(n){n.call(this,e,t)}).bind(this,o[r].fn),0),o[r].once&&this.off(n,o[r].fn,o[r].id));return this._loadQueue(n),this},_loadQueue:function(n){if(this._queue.length>0){var e=this._queue[0];e.event===n&&(this._queue.shift(),this._loadQueue()),n||e.action()}return this},_ended:function(n){var e=n._sprite;if(!this._webAudio&&n._node&&!n._node.paused&&!n._node.ended&&n._node.currentTime<n._stop)return setTimeout(this._ended.bind(this,n),100),this;var t=!(!n._loop&&!this._sprite[e][2]);if(this._emit("end",n._id),!this._webAudio&&t&&this.stop(n._id,!0).play(n._id),this._webAudio&&t){this._emit("play",n._id),n._seek=n._start||0,n._rateSeek=0,n._playStart=r.ctx.currentTime;var o=1e3*(n._stop-n._start)/Math.abs(n._rate);this._endTimers[n._id]=setTimeout(this._ended.bind(this,n),o)}return this._webAudio&&!t&&(n._paused=!0,n._ended=!0,n._seek=n._start||0,n._rateSeek=0,this._clearTimer(n._id),this._cleanBuffer(n._node),r._autoSuspend()),this._webAudio||t||this.stop(n._id),this},_clearTimer:function(n){if(this._endTimers[n]){if("function"!=typeof this._endTimers[n])clearTimeout(this._endTimers[n]);else{var e=this._soundById(n);e&&e._node&&e._node.removeEventListener("ended",this._endTimers[n],!1)}delete this._endTimers[n]}return this},_soundById:function(n){for(var e=0;e<this._sounds.length;e++)if(n===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){this._drain();for(var n=0;n<this._sounds.length;n++)if(this._sounds[n]._ended)return this._sounds[n].reset();return new l(this)},_drain:function(){var n=this._pool,e=0,t=0;if(!(this._sounds.length<n)){for(t=0;t<this._sounds.length;t++)this._sounds[t]._ended&&e++;for(t=this._sounds.length-1;t>=0;t--){if(e<=n)return;this._sounds[t]._ended&&(this._webAudio&&this._sounds[t]._node&&this._sounds[t]._node.disconnect(0),this._sounds.splice(t,1),e--)}}},_getSoundIds:function(n){if(void 0===n){for(var e=[],t=0;t<this._sounds.length;t++)e.push(this._sounds[t]._id);return e}return[n]},_refreshBuffer:function(n){return n._node.bufferSource=r.ctx.createBufferSource(),n._node.bufferSource.buffer=a[this._src],n._node.bufferSource.connect(n._panner?n._panner:n._node),n._node.bufferSource.loop=n._loop,n._loop&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop),n._node.bufferSource.playbackRate.setValueAtTime(n._rate,r.ctx.currentTime),this},_cleanBuffer:function(n){if(r._scratchBuffer){n.bufferSource.onended=null,n.bufferSource.disconnect(0);try{n.bufferSource.buffer=r._scratchBuffer}catch(n){}}return n.bufferSource=null,this}};var l=function(n){this._parent=n,this.init()};l.prototype={init:function(){var n=this._parent;return this._muted=n._muted,this._loop=n._loop,this._volume=n._volume,this._rate=n._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++r._counter,n._sounds.push(this),this.create(),this},create:function(){var n=this._parent,e=r._muted||this._muted||this._parent._muted?0:this._volume;return n._webAudio?(this._node=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),this._node.gain.setValueAtTime(e,r.ctx.currentTime),this._node.paused=!0,this._node.connect(r.masterGain)):(this._node=new Audio,this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(r._canPlayEvent,this._loadFn,!1),this._node.src=n._src,this._node.preload="auto",this._node.volume=e*r.volume(),this._node.load()),this},reset:function(){var n=this._parent;return this._muted=n._muted,this._loop=n._loop,this._volume=n._volume,this._rate=n._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++r._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var n=this._parent;n._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(n._sprite).length&&(n._sprite={__default:[0,1e3*n._duration]}),"loaded"!==n._state&&(n._state="loaded",n._emit("load"),n._loadQueue()),this._node.removeEventListener(r._canPlayEvent,this._loadFn,!1)}};var a={},u=function(n){var e=n._src;if(a[e])return n._duration=a[e].duration,void c(n);if(/^data:[^;]+;base64,/.test(e)){for(var t=atob(e.split(",")[1]),o=new Uint8Array(t.length),r=0;r<t.length;++r)o[r]=t.charCodeAt(r);d(o.buffer,n)}else{var i=new XMLHttpRequest;i.open("GET",e,!0),i.withCredentials=n._xhrWithCredentials,i.responseType="arraybuffer",i.onload=function(){var e=(i.status+"")[0];"0"===e||"2"===e||"3"===e?d(i.response,n):n._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".")},i.onerror=function(){n._webAudio&&(n._html5=!0,n._webAudio=!1,n._sounds=[],delete a[e],n.load())},s(i)}},s=function(n){try{n.send()}catch(e){n.onerror()}},d=function(n,e){r.ctx.decodeAudioData(n,function(n){n&&e._sounds.length>0&&(a[e._src]=n,c(e,n))},function(){e._emit("loaderror",null,"Decoding audio data failed.")})},c=function(n,e){e&&!n._duration&&(n._duration=e.duration),0===Object.keys(n._sprite).length&&(n._sprite={__default:[0,1e3*n._duration]}),"loaded"!==n._state&&(n._state="loaded",n._emit("load"),n._loadQueue())},_=function(){try{"undefined"!=typeof AudioContext?r.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch(n){r.usingWebAudio=!1}var n=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),e=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),t=e?parseInt(e[1],10):null;if(n&&t&&t<9){var o=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());(r._navigator&&r._navigator.standalone&&!o||r._navigator&&!r._navigator.standalone&&!o)&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:1,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()};void 0===(o=(function(){return{Howler:r,Howl:i}}).apply(e,[]))||(n.exports=o),e.Howler=r,e.Howl=i,"undefined"!=typeof window?(window.HowlerGlobal=t,window.Howler=r,window.Howl=i,window.Sound=l):"undefined"!=typeof global&&(global.HowlerGlobal=t,global.Howler=r,global.Howl=i,global.Sound=l)}(),function(){"use strict";var n;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){if(!this.ctx||!this.ctx.listener)return this;for(var e=this._howls.length-1;e>=0;e--)this._howls[e].stereo(n);return this},HowlerGlobal.prototype.pos=function(n,e,t){return this.ctx&&this.ctx.listener?(e="number"!=typeof e?this._pos[1]:e,t="number"!=typeof t?this._pos[2]:t,"number"!=typeof n?this._pos:(this._pos=[n,e,t],this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(n,e,t,o,r,i){if(!this.ctx||!this.ctx.listener)return this;var l=this._orientation;return e="number"!=typeof e?l[1]:e,t="number"!=typeof t?l[2]:t,o="number"!=typeof o?l[3]:o,r="number"!=typeof r?l[4]:r,i="number"!=typeof i?l[5]:i,"number"!=typeof n?l:(this._orientation=[n,e,t,o,r,i],this.ctx.listener.setOrientation(n,e,t,o,r,i),this)},Howl.prototype.init=(n=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],n.call(this,e)}),Howl.prototype.stereo=function(n,t){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"stereo",action:function(){o.stereo(n,t)}}),o;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===t){if("number"!=typeof n)return o._stereo;o._stereo=n,o._pos=[n,0,0]}for(var i=o._getSoundIds(t),l=0;l<i.length;l++){var a=o._soundById(i[l]);if(a){if("number"!=typeof n)return a._stereo;a._stereo=n,a._pos=[n,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||e(a,r),"spatial"===r?a._panner.setPosition(n,0,0):a._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),o._emit("stereo",a._id)}}return o},Howl.prototype.pos=function(n,t,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(n,t,o,r)}}),i;if(t="number"!=typeof t?0:t,o="number"!=typeof o?-.5:o,void 0===r){if("number"!=typeof n)return i._pos;i._pos=[n,t,o]}for(var l=i._getSoundIds(r),a=0;a<l.length;a++){var u=i._soundById(l[a]);if(u){if("number"!=typeof n)return u._pos;u._pos=[n,t,o],u._node&&(u._panner&&!u._panner.pan||e(u,"spatial"),u._panner.setPosition(n,t,o)),i._emit("pos",u._id)}}return i},Howl.prototype.orientation=function(n,t,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(n,t,o,r)}}),i;if(t="number"!=typeof t?i._orientation[1]:t,o="number"!=typeof o?i._orientation[2]:o,void 0===r){if("number"!=typeof n)return i._orientation;i._orientation=[n,t,o]}for(var l=i._getSoundIds(r),a=0;a<l.length;a++){var u=i._soundById(l[a]);if(u){if("number"!=typeof n)return u._orientation;u._orientation=[n,t,o],u._node&&(u._panner||(u._pos||(u._pos=i._pos||[0,0,-.5]),e(u,"spatial")),u._panner.setOrientation(n,t,o)),i._emit("orientation",u._id)}}return i},Howl.prototype.pannerAttr=function(){var n,t,o,r=arguments;if(!this._webAudio)return this;if(0===r.length)return this._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(o=this._soundById(parseInt(r[0],10)))?o._pannerAttr:this._pannerAttr;n=r[0],void 0===t&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),this._pannerAttr={coneInnerAngle:void 0!==n.pannerAttr.coneInnerAngle?n.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:void 0!==n.pannerAttr.coneOuterAngle?n.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:void 0!==n.pannerAttr.coneOuterGain?n.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:void 0!==n.pannerAttr.distanceModel?n.pannerAttr.distanceModel:this._distanceModel,maxDistance:void 0!==n.pannerAttr.maxDistance?n.pannerAttr.maxDistance:this._maxDistance,refDistance:void 0!==n.pannerAttr.refDistance?n.pannerAttr.refDistance:this._refDistance,rolloffFactor:void 0!==n.pannerAttr.rolloffFactor?n.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:void 0!==n.pannerAttr.panningModel?n.pannerAttr.panningModel:this._panningModel})}else 2===r.length&&(n=r[0],t=parseInt(r[1],10));for(var i=this._getSoundIds(t),l=0;l<i.length;l++)if(o=this._soundById(i[l])){var a=o._pannerAttr;a={coneInnerAngle:void 0!==n.coneInnerAngle?n.coneInnerAngle:a.coneInnerAngle,coneOuterAngle:void 0!==n.coneOuterAngle?n.coneOuterAngle:a.coneOuterAngle,coneOuterGain:void 0!==n.coneOuterGain?n.coneOuterGain:a.coneOuterGain,distanceModel:void 0!==n.distanceModel?n.distanceModel:a.distanceModel,maxDistance:void 0!==n.maxDistance?n.maxDistance:a.maxDistance,refDistance:void 0!==n.refDistance?n.refDistance:a.refDistance,rolloffFactor:void 0!==n.rolloffFactor?n.rolloffFactor:a.rolloffFactor,panningModel:void 0!==n.panningModel?n.panningModel:a.panningModel};var u=o._panner;u?(u.coneInnerAngle=a.coneInnerAngle,u.coneOuterAngle=a.coneOuterAngle,u.coneOuterGain=a.coneOuterGain,u.distanceModel=a.distanceModel,u.maxDistance=a.maxDistance,u.refDistance=a.refDistance,u.rolloffFactor=a.rolloffFactor,u.panningModel=a.panningModel):(o._pos||(o._pos=this._pos||[0,0,-.5]),e(o,"spatial"))}return this},Sound.prototype.init=function(n){return function(){var e=this._parent;this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,n.call(this),this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var e=this._parent;return this._orientation=e._orientation,this._pos=e._pos,this._pannerAttr=e._pannerAttr,n.call(this)}}(Sound.prototype.reset);var e=function(n,e){"spatial"===(e=e||"spatial")?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}}()}}]);